from emora_stdm import KnowledgeBase, DialogueFlow
from enum import Enum


class State(Enum):
    START = 0
    P1 = 1
    Ua = 2
    Ub = 3
    P2A = 4
    P2B = 5
    P2C = 6
    Uc = 7
    Ud = 8

    ERR = 9


df = DialogueFlow(State.START, initial_speaker=DialogueFlow.Speaker.SYSTEM)

df.add_system_transition(State.START, State.P1, '"Do you have a phone?"')
df.add_user_transition(State.P1, State.Ua, "$response={no}")
df.add_user_transition(State.P1, State.Ub, "$response={yes}")
df.add_user_transition(State.P2B, State.Uc, "$response={yes}")
df.add_user_transition(State.P2C, State.Ub, "$response={yes}")

df.add_system_transition(State.Ub, State.P2A, '"What type of mobile apps do you use?"')
df.add_system_transition(State.Ua, State.P2C, '"Do you use a phone?"')


ont_dict = {
    "ontology": {
        #  "ontyes":
        #      [
        #         "ontyeah",
        #         "ontyes",
        #         "ontyea",
        #         "ontmmhmm",
        #         "ontyuh"
        #     ],
        "ontapptype":
            [
                "ontfitness",
                "ontproductivity",
                "ontsocialmedia",
                "ontstorage",
                "ontstreaming"
            ],
        "ontproductivity":
            [
                "ontstudytimer",
                "onthealth",
                "onteducation",
                "ontnotes"
            ],
        "ontstudytimer":
            [
                ""
            ],

        "ontsocialmedia":
            [
                "ontsnapchat",
                "ontinstagram",
                "ontfacebook",
                "onttwitter"
            ],
        "ontstorage":
            [
                "ontdropbox",
                "ontemorybox",
                "onticloud"

            ],

        "ontfitness":
            [
                "ontsleeptracker",
                "ontcaloriecounter",
                "ontpedometer",
                "ontmoodlog"
            ]
    }
}

df.run(debugging=False)
